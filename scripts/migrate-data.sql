-- Script de migration des données de Supabase vers PostgreSQL local
-- À exécuter une seule fois après le premier déploiement
-- Usage: docker exec -i smoker-db psql -U smoker -d smoker < scripts/migrate-data.sql

-- ============================================
-- SMOKES
-- ============================================
INSERT INTO "smokes" (id, name, notes, created_at) VALUES
(24, 'Fumaisons 2025', E'Erreur de pesée sur le filet mignon 1 donc il sera moins salé, à voir ce que ça donne.\nErreur aussi sur la rouelle 1, pesée avant d''enlever l''os il me semble.\n\nRetours sur les morceaux :\n* Filet 3 - bien en affinage\n* Magret 3 - trop sec\n* Rouelle 2 - très bien\n\nRépartition des dégustations :\n* Matthieu Abu Dhabi -> 1 filet (1) ; 1 magret (4)\n* Noël Sacre (24/12) - 9 personnes -> 1 magret (3) ; 1 filet (3) ; 1/2 rouelle (2)\n* Noël Myriam (27/12) - 20 personnes -> 1 magret (2) ; 2 filets (3&5) ; 1 rouelle (1)\n* Nouvel An (31/12) - 10 personnes -> 1 saumon (1kg) ; 1 magret (1) ; 1/2 rouelle (2) ; 2 filets (2&6&7)\n* Anniversaire Matthieu (03/01) - 10 personnes -> 1 saumon (1kg)\n\nNotes saumon :\n* Fumer davantage le saumon (1 batonnet par kilo) et eventuellement un peu moins de sucre', '2025-11-22 13:00:00+00');

-- ============================================
-- ITEMS
-- ============================================
INSERT INTO "items" (id, smoke_id, name, type, cut, initial_weight, diameter, target_weight, curing_method, status, salt_amount, sugar_amount, pepper_amount, spices, curing_start_date, curing_end_date, rinsing_date, drying_start_date, smoking_date, aging_start_date, created_at, icon) VALUES
(13, 24, 'Filet mignon 1', 'porc', 'Filet mignon', 391, 6, 274, 'vacuum', 'done', 12, 6, 3, '[{"name":"Herbes de Provence","amount":3}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:44:14.173+00', '2025-11-26 23:44:17.292+00', '2025-11-28 16:11:43.056+00', '2025-11-28 16:11:45.493+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(14, 24, 'Filet mignon 2', 'porc', 'Filet mignon', 389, 6, 272, 'vacuum', 'done', 16, 8, 4, '[{"name":"Herbes de Provence","amount":3}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:44:23.54+00', '2025-11-26 23:44:24.403+00', '2025-11-28 16:11:56.494+00', '2025-11-28 16:11:57.319+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(15, 24, 'Filet mignon 3', 'porc', 'Filet mignon', 471, 6, 330, 'vacuum', 'done', 19, 10, 5, '[{"name":"Herbes de Provence","amount":5}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:44:42.539+00', '2025-11-26 23:44:43.857+00', '2025-11-28 16:12:01.077+00', '2025-11-28 16:12:01.67+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(16, 24, 'Filet mignon 4', 'porc', 'Filet mignon', 409, 6, 286, 'vacuum', 'done', 16, 8, 4, '[{"name":"Herbes de Provence","amount":4}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:44:48.35+00', '2025-11-26 23:44:49.355+00', '2025-11-28 16:12:05.84+00', '2025-11-28 16:12:06.688+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(17, 24, 'Filet mignon 5', 'porc', 'Filet mignon', 455, 6, 319, 'vacuum', 'done', 18, 9, 5, '[{"name":"Piment d''Espelette","amount":1},{"name":"Paprika fumé","amount":3}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:44:54.373+00', '2025-11-26 23:44:55.365+00', '2025-11-28 16:12:10.175+00', '2025-11-28 16:12:10.903+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(18, 24, 'Filet mignon 6', 'porc', 'Filet mignon', 466, 6, 326, 'vacuum', 'done', 18, 9, 5, '[{"name":"Piment d''Espelette","amount":1},{"name":"Paprika fumé","amount":3}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:45:00.433+00', '2025-11-26 23:45:01.393+00', '2025-11-28 16:12:13.647+00', '2025-11-28 16:12:14.585+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(19, 24, 'Filet mignon 7', 'porc', 'Filet mignon', 487, 6, 341, 'vacuum', 'done', 20, 10, 5, '[{"name":"Céleri","amount":3}]', '2025-11-22 13:00:00+00', '2025-11-26 13:00:00+00', '2025-11-26 23:45:04.625+00', '2025-11-26 23:45:05.458+00', '2025-11-28 16:12:17.833+00', '2025-11-28 16:12:18.395+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(20, 24, 'Filet mignon 8', 'porc', 'Filet mignon', 412, 6, 288, 'vacuum', 'done', 17, 8, 4, '[{"name":"4 épices","amount":3.5}]', '2025-11-27 00:37:15.414+00', '2025-12-01 00:37:15.414+00', '2025-11-27 00:41:06.893+00', '2025-11-27 00:41:08.094+00', '2025-11-28 16:12:20.758+00', '2025-11-28 16:12:21.177+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(21, 24, 'Rouelle 1', 'porc', 'Rouelle', 1196, 4, 718, 'vacuum', 'done', 48, 24, 12, NULL, '2025-11-27 00:37:29.064+00', '2025-11-30 00:37:29.064+00', '2025-11-27 00:59:29.01+00', '2025-11-27 00:59:29.752+00', '2025-11-28 16:12:36.988+00', '2025-11-28 16:12:37.827+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(22, 24, 'Rouelle 2', 'porc', 'Rouelle', 900, 4, 540, 'vacuum', 'done', 36, 18, 9, NULL, '2025-11-27 00:37:40.066+00', '2025-11-30 00:37:40.066+00', '2025-11-27 00:59:23.349+00', '2025-11-27 00:59:24.93+00', '2025-11-28 16:12:40.213+00', '2025-11-28 16:12:40.671+00', '2025-11-22 13:00:00+00', 'piggy-bank'),
(23, 24, 'Magret 1', 'canard', 'Magret', 260, 3, 169, 'traditional', 'done', 0, 0, 0, NULL, '2025-11-22 13:00:00+00', '2025-11-22 22:00:00+00', '2025-11-22 22:00:00+00', NULL, '2025-11-28 16:12:23.615+00', '2025-11-28 16:12:24.05+00', '2025-11-22 13:00:00+00', 'bird'),
(24, 24, 'Magret 2', 'canard', 'Magret', 275, 3, 179, 'traditional', 'done', 0, 0, 0, NULL, '2025-11-22 13:00:00+00', '2025-11-22 22:00:00+00', '2025-11-22 22:00:00+00', NULL, '2025-11-28 16:12:26.954+00', '2025-11-28 16:12:27.53+00', '2025-11-22 13:00:00+00', 'bird'),
(25, 24, 'Magret 3', 'canard', 'Magret', 275, 3, 179, 'traditional', 'done', 0, 0, 0, NULL, '2025-11-22 13:00:00+00', '2025-11-22 22:00:00+00', '2025-11-22 22:00:00+00', NULL, '2025-11-28 16:12:30.2+00', '2025-11-28 16:12:30.658+00', '2025-11-22 13:00:00+00', 'bird'),
(26, 24, 'Magret 4', 'canard', 'Magret', 287, 3, 187, 'traditional', 'done', 0, 0, 0, NULL, '2025-11-22 13:00:00+00', '2025-11-22 22:00:00+00', '2025-11-22 22:00:00+00', NULL, '2025-11-28 16:12:33.2+00', '2025-11-28 16:12:33.687+00', '2025-11-22 13:00:00+00', 'bird'),
(39, 24, 'Saumon', 'saumon', 'Filet ', 2168, 3, 1951, 'vacuum', 'done', 87, 44, 22, '[{"name":"Aneth","amount":8}]', '2025-12-23 18:00:20.742+00', '2025-12-26 18:00:20.742+00', '2025-12-25 21:49:33.333+00', '2025-12-25 21:49:35.056+00', '2025-12-26 21:11:08.747+00', '2025-12-26 21:11:10.185+00', '2025-12-23 18:00:21.258817+00', 'fish');

-- ============================================
-- WEIGHT_LOGS
-- ============================================
INSERT INTO "weight_logs" (id, item_id, weight, date) VALUES
(34, 20, 341, '2025-12-05 18:12:00+00'),
(35, 19, 428, '2025-12-05 18:13:00+00'),
(36, 22, 784, '2025-12-05 18:14:00+00'),
(37, 21, 832, '2025-12-05 18:15:00+00'),
(38, 26, 224, '2025-12-05 18:17:00+00'),
(39, 23, 205, '2025-12-05 18:18:00+00'),
(40, 24, 218, '2025-12-05 18:18:00+00'),
(41, 25, 206, '2025-12-05 18:18:00+00'),
(42, 18, 386, '2025-12-05 21:11:00+00'),
(43, 17, 390, '2025-12-05 21:11:00+00'),
(44, 13, 347, '2025-12-05 21:15:00+00'),
(45, 14, 347, '2025-12-05 21:15:00+00'),
(46, 15, 435, '2025-12-05 21:16:00+00'),
(47, 16, 367, '2025-12-05 21:16:00+00'),
(49, 13, 326, '2025-12-12 18:36:00+00'),
(50, 14, 317, '2025-12-12 18:36:00+00'),
(51, 15, 408, '2025-12-12 18:37:00+00'),
(52, 16, 342, '2025-12-12 18:37:00+00'),
(53, 17, 362, '2025-12-12 18:38:00+00'),
(54, 18, 347, '2025-12-12 18:38:00+00'),
(55, 19, 382, '2025-12-12 18:38:00+00'),
(56, 20, 306, '2025-12-12 18:39:00+00'),
(57, 23, 190, '2025-12-12 18:40:00+00'),
(58, 24, 198, '2025-12-12 18:42:00+00'),
(59, 25, 188, '2025-12-12 18:42:00+00'),
(60, 26, 208, '2025-12-12 18:43:00+00'),
(61, 21, 788, '2025-12-12 18:43:00+00'),
(62, 22, 717, '2025-12-12 18:43:00+00'),
(63, 13, 310, '2025-12-17 17:25:00+00'),
(64, 26, 200, '2025-12-17 17:31:00+00'),
(65, 14, 293, '2025-12-19 13:27:00+00'),
(66, 15, 384, '2025-12-19 13:28:00+00'),
(67, 16, 317, '2025-12-19 13:28:00+00'),
(68, 17, 331, '2025-12-19 13:29:00+00'),
(69, 18, 311, '2025-12-19 13:29:00+00'),
(70, 19, 345, '2025-12-19 13:30:00+00'),
(71, 20, 281, '2025-12-19 13:30:00+00'),
(72, 23, 181, '2025-12-19 13:30:00+00'),
(73, 24, 189, '2025-12-19 13:30:00+00'),
(74, 25, 177, '2025-12-19 13:31:00+00'),
(75, 21, 744, '2025-12-19 13:31:00+00'),
(76, 22, 656, '2025-12-19 13:32:00+00'),
(77, 14, 276, '2025-12-23 17:25:00+00'),
(78, 15, 366, '2025-12-23 17:27:00+00'),
(79, 16, 300, '2025-12-23 17:29:00+00'),
(80, 17, 319, '2025-12-23 17:30:00+00'),
(81, 19, 326, '2025-12-23 17:34:00+00'),
(82, 23, 176, '2025-12-23 17:36:00+00'),
(83, 24, 183, '2025-12-23 17:37:00+00'),
(84, 21, 720, '2025-12-23 17:39:00+00'),
(85, 22, 626, '2025-12-23 17:40:00+00');

-- ============================================
-- RESET SEQUENCES
-- ============================================
SELECT setval('smokes_id_seq', COALESCE((SELECT MAX(id) FROM smokes), 1));
SELECT setval('items_id_seq', COALESCE((SELECT MAX(id) FROM items), 1));
SELECT setval('weight_logs_id_seq', COALESCE((SELECT MAX(id) FROM weight_logs), 1));
